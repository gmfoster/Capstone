import pyrebase
import hashlib
import re
import urllib
import urllib.request
import requests
import json
import time

class Recent_Pastes():
    def __init__(self):
        self.url = 'https://scrape.pastebin.com/api_scraping.php?limit=250'
        self.keys = []

        
    def search(self, keyword):
        response = requests.get(self.url)
        json_response = response.json()
        scrape_data = ""
        #meta_url = 'https://scrape.pastebin.com/api_scrape_item_meta.php?i='
        for items in json_response:
            i = items['scrape_url']
            p = items['key']
            scrape_data = scrape_data + p + '\n'
            print(items['scrape_url'])
            #if (p == keyword):
            #    print("match!")
            scrape = requests.get(i)
            text = scrape.text
            if (text.find(keyword) != -1):
                print("Found Word In Paste: ", items['key'])
                print(scrape.text)
                self.keys.append(items['key'])
            time.sleep(1)
        print(self.keys)
        #print(scrape_data)
        

if __name__ == "__main__":
    paste = Recent_Pastes()
    paste.search('TEST')
